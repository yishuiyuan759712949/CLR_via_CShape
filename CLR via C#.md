# CLR via C#


## Chapter 7 第七章
    
### 常量、const (page:182)

- 他有一个从不变化的值。值必须在编译前确定，确定后编译器把值保存到程序集的元数据中。这个以为着定义常量（const）只能是编译器认定的基元类型。
Bool Char Byte SByte Int16 Int32 UInt Single Double Decimal String
- 常量都是静态的，系统默认常量带有static属性。我们声明常量时，不需要代关键字 static.
- **代码引用一个常量符号时，编译器会在定义常量的程序集的元数据中查找该符号，提取常量值，并将值嵌入生成到IL代码中**。由于常量直接嵌入代码，所以在运行时不需要为常量分配任何内存
- 一个程序引用另一个Dll中的常量，当这个Dll中常量发生改变时，替换改Dll，程序运行的结果还是改变前的结果。这个是因为在编译时，常量直接被替换成值，不需要再次在Dll中获取。如果想改变常量输入，必须重新编译一次应用程序。

- **如果希望在运行时提取另一个程序集中的值，不因该使用const,因该使用readonly字段**

### 字段 readonly static

- CLR支持readonly字段和read/write字段。
    
    - readonly 可以在申明中初始化，也可以在构造函数中初始化，其他情况不能修改
    - readonly字段只能在构造函数中修改（这个构造器只能使用一次，在首次创建时），编译器和验证机制保证它不能被构造器以外的方法修改。**注意：可以使用反射修改readonly值**。
- **readonly修饰的字段，初始化只是固定了其引用（地址不能修改），但是它引用对象的属性是可以更改的**。示例如下图：

![readonly初始化只是固定了引用](res\readonly.png)




